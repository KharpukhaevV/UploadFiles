{"ast":null,"code":"import _classCallCheck from \"/home/vladimir/IdeaProjects/UploadFiles/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/IdeaProjects/UploadFiles/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vladimir/IdeaProjects/UploadFiles/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vladimir/IdeaProjects/UploadFiles/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vladimir/IdeaProjects/UploadFiles/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/vladimir/IdeaProjects/UploadFiles/frontend/src/components/UploadImageComponent.jsx\";\nimport React, { Component } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport FileService from '../services/FileService';\nimport Basic from './upload.component';\nimport { useDropzone } from \"react-dropzone\";\nimport Directiry from \"./components/Directiry\";\nimport catalog from \"./catalog.json\";\nvar UploadImageComponent = /*#__PURE__*/function (_Component) {\n  _inherits(UploadImageComponent, _Component);\n  function UploadImageComponent(props) {\n    var _this;\n    _classCallCheck(this, UploadImageComponent);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UploadImageComponent).call(this, props));\n    _this.onFileChange = function (event) {\n      _this.setState({\n        files: event.target.files\n      });\n    };\n    _this.onUpload = function (event) {\n      event.preventDefault();\n      var formData = new FormData();\n      for (var _i = 0, _Object$keys = Object.keys(_this.state.files); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n        formData.append('files', _this.state.files[key]);\n      }\n      FileService.uploadImage(formData).then(function (response) {\n        console.log(response.data);\n        _this.setState({\n          fileUploaded: true\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n    _this.state = {\n      files: null,\n      fileUploaded: null\n    };\n    return _this;\n  }\n  _createClass(UploadImageComponent, [{\n    key: \"render\",\n    value: function render() {\n      if (this.state.fileUploaded) {\n        return /*#__PURE__*/React.createElement(Navigate, {\n          to: \"/my-images\",\n          replace: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 20\n          }\n        });\n      }\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card col-md-6 offset-md-3 mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.onUpload,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 33\n        }\n      }, \"Select a file:\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"mx-2\",\n        id: \"input-file-upload\",\n        type: \"file\",\n        name: \"file\",\n        directory: \"\",\n        webkitdirectory: \"\",\n        onChange: this.onFileChange,\n        multiple: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 33\n        }\n      })), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success btn-sm mt-3\",\n        type: \"submit\",\n        disabled: !this.state.files,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 29\n        }\n      }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\")))));\n    }\n  }]);\n  return UploadImageComponent;\n}(Component);\nexport default UploadImageComponent;","map":{"version":3,"names":["React","Component","Navigate","FileService","Basic","useDropzone","Directiry","catalog","UploadImageComponent","props","onFileChange","event","setState","files","target","onUpload","preventDefault","formData","FormData","Object","keys","state","key","append","uploadImage","then","response","console","log","data","fileUploaded","catch","error"],"sources":["/home/vladimir/IdeaProjects/UploadFiles/frontend/src/components/UploadImageComponent.jsx"],"sourcesContent":["import React, {Component} from 'react';\nimport {Navigate} from 'react-router-dom';\nimport FileService from '../services/FileService';\nimport Basic from './upload.component';\nimport { useDropzone } from \"react-dropzone\";\nimport Directiry from \"./components/Directiry\";\nimport catalog from \"./catalog.json\"\n\n\nclass UploadImageComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: null,\n            fileUploaded: null\n        }\n    }\n\n\n    onFileChange = (event) => {\n        this.setState({\n            files: event.target.files\n        });\n    }\n\n\n    onUpload = (event) => {\n        event.preventDefault();\n        const formData = new FormData();\n\n        for (const key of Object.keys(this.state.files)) {\n            formData.append('files', this.state.files[key]);\n        }\n\n        FileService.uploadImage(formData).then((response) => {\n            console.log(response.data);\n            this.setState({fileUploaded: true});\n        }).catch(error => {\n            console.log(error);\n        });\n    }\n\n    render() {\n        if (this.state.fileUploaded) {\n            return <Navigate to=\"/my-images\" replace={true}/>;\n        }\n\n        return (\n            <div className='row'>\n                <div className='card col-md-6 offset-md-3 mt-5'>\n                    <div className='card-body'>\n                        <form onSubmit={this.onUpload}>\n                            <div>\n                                <label>Select a file:</label>\n                                <input className='mx-2' id=\"input-file-upload\" type='file' name='file' directory=\"\"\n                                       webkitdirectory=\"\" onChange={this.onFileChange} multiple></input>\n                            </div>\n                            <button className='btn btn-success btn-sm mt-3' type='submit'\n                                    disabled={!this.state.files}>Загрузить\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default UploadImageComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}